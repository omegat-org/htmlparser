<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Link and Mail Extractor </title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <style type="text/css">
    <!--code { font-family: Courier New, Courier; font-size: 10pt; margin: 0px; }-->
  </style>
</head>

<body>
<p><strong>Extracting Links and Mail Addresses from a Webpage</strong></p>
<p>We are going to extract links from a given URL. This program is provided in 
  the parserApplications package (in the download bundle, this will be in src.zip).</p>
<p> 

<!-- ======================================================== -->
<!-- = Java Sourcecode to HTML automatically converted code = -->
<!-- =   Java to HTML Converter V3.2 2003 by Markus Gebhard  markus@jave.de   = -->
<!-- =     Further information: http://www.java2html.de     = -->
<center>
 <table  align="center" border="2" cellpadding="3" cellspacing="0" bgcolor="#ffffff">
   <tr>
  <!-- start source code -->
   <td nowrap valign="top" align="left">
    <code>
<font color="#808080">01&nbsp;</font><font color="#0000c0"><b>import&nbsp;</b></font><font color="#000000">org.htmlparser.Node;</font><br>
<font color="#808080">02&nbsp;</font><font color="#0000c0"><b>import&nbsp;</b></font><font color="#000000">org.htmlparser.Parser;</font><br>
<font color="#808080">03&nbsp;</font><font color="#0000c0"><b>import&nbsp;</b></font><font color="#000000">org.htmlparser.tags.LinkTag;</font><br>
<font color="#808080">04&nbsp;</font><font color="#0000c0"><b>import&nbsp;</b></font><font color="#000000">org.htmlparser.util.ParserException;</font><br>
<font color="#808080">05&nbsp;</font><font color="#ffffff"></font><br>
<font color="#808080">06&nbsp;</font><font color="#008000">/**</font><br>
<font color="#808080">07&nbsp;</font><font color="#ffffff">&nbsp;</font><font color="#008000">*&nbsp;LinkExtractor&nbsp;extracts&nbsp;all&nbsp;the&nbsp;links&nbsp;from&nbsp;the&nbsp;given&nbsp;webpage</font><br>
<font color="#808080">08&nbsp;</font><font color="#ffffff">&nbsp;</font><font color="#008000">*&nbsp;and&nbsp;prints&nbsp;them&nbsp;on&nbsp;standard&nbsp;output.</font><br>
<font color="#808080">09&nbsp;</font><font color="#ffffff">&nbsp;</font><font color="#008000">*/</font><br>
<font color="#808080">10&nbsp;</font><font color="#0000c0"><b>public&nbsp;class&nbsp;</b></font><font color="#000000">LinkExtractor&nbsp;</font><font color="#000000">{</font><br>
<font color="#808080">11&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000c0"><b>private&nbsp;</b></font><font color="#000000">String&nbsp;location;</font><br>
<font color="#808080">12&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000c0"><b>private&nbsp;</b></font><font color="#000000">Parser&nbsp;parser;</font><br>
<font color="#808080">13&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000c0"><b>public&nbsp;</b></font><font color="#000000">LinkExtractor</font><font color="#000000">(</font><font color="#000000">String&nbsp;location</font><font color="#000000">)&nbsp;{</font><br>
<font color="#808080">14&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000c0"><b>this</b></font><font color="#000000">.location&nbsp;=&nbsp;location;</font><br>
<font color="#808080">15&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000c0"><b>try&nbsp;</b></font><font color="#000000">{</font><br>
<font color="#808080"><a name="16">16</a>&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000c0"><b>this</b></font><font color="#000000">.parser&nbsp;&nbsp;&nbsp;=&nbsp;</font><font color="#0000c0"><b>new&nbsp;</b></font><font color="#000000">Parser</font><font color="#000000">(</font><font color="#000000">location</font><font color="#000000">)</font><font color="#000000">;&nbsp;</font><font color="#008000">//&nbsp;Create&nbsp;the&nbsp;parser&nbsp;object</font><br>
<font color="#808080"><a name="17">17</a>&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">parser.registerScanners</font><font color="#000000">()</font><font color="#000000">;&nbsp;</font><font color="#008000">//&nbsp;Register&nbsp;standard&nbsp;scanners&nbsp;(Very&nbsp;Important)</font><br>
<font color="#808080">18&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br>
<font color="#808080">19&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000c0"><b>catch&nbsp;</b></font><font color="#000000">(</font><font color="#000000">ParserException&nbsp;e</font><font color="#000000">)&nbsp;{</font><br>
<font color="#808080">20&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">e.printStackTrace</font><font color="#000000">()</font><font color="#000000">;</font><br>
<font color="#808080">21&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br>
<font color="#808080">22&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><br>
<font color="#808080">23&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br>
<font color="#808080">24&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000c0"><b>public&nbsp;</b></font><font color="#c00000"><b>void&nbsp;</b></font><font color="#000000">extractLinks</font><font color="#000000">()&nbsp;</font><font color="#0000c0"><b>throws&nbsp;</b></font><font color="#000000">ParserException&nbsp;</font><font color="#000000">{</font><br>
<font color="#808080">25&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">System.out.println</font><font color="#000000">(</font><font color="#990000">&#34;Parsing&nbsp;&#34;</font><font color="#000000">+location+</font><font color="#990000">&#34;&nbsp;for&nbsp;links...&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br>
<font color="#808080"><a name="26">26</a>&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">Node&nbsp;</font><font color="#000000">[]&nbsp;</font><font color="#000000">links&nbsp;=&nbsp;parser.extractAllNodesThatAre</font><font color="#000000">(</font><font color="#000000">LinkTag.</font><font color="#0000c0"><b>class</b></font><font color="#000000">)</font><font color="#000000">;</font><br>
<font color="#808080">27&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000c0"><b>for&nbsp;</b></font><font color="#000000">(</font><font color="#c00000"><b>int&nbsp;</b></font><font color="#000000">i&nbsp;=&nbsp;</font><font color="#990000">0</font><font color="#000000">;i&nbsp;&lt;&nbsp;links.length;i++</font><font color="#000000">)&nbsp;{</font><br>
<font color="#808080">28&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">LinkTag&nbsp;linkTag&nbsp;=&nbsp;</font><font color="#000000">(</font><font color="#000000">LinkTag</font><font color="#000000">)</font><font color="#000000">links</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">]</font><font color="#000000">;</font><br>
<font color="#808080">29&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#008000">//&nbsp;To&nbsp;extract&nbsp;only&nbsp;mail&nbsp;addresses,&nbsp;uncomment&nbsp;the&nbsp;following&nbsp;line</font><br>
<font color="#808080">30&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#008000">//&nbsp;if&nbsp;(linkTag.isMailLink())</font><br>
<font color="#808080">31&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">System.out.println</font><font color="#000000">(</font><font color="#000000">linkTag.getLink</font><font color="#000000">())</font><font color="#000000">;</font><br>
<font color="#808080">32&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br>
<font color="#808080">33&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br>
<font color="#808080">34&nbsp;</font><font color="#ffffff"></font><br>
<font color="#808080">35&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000c0"><b>public&nbsp;static&nbsp;</b></font><font color="#c00000"><b>void&nbsp;</b></font><font color="#000000">main</font><font color="#000000">(</font><font color="#000000">String</font><font color="#000000">[]&nbsp;</font><font color="#000000">args</font><font color="#000000">)&nbsp;{</font><br>
<font color="#808080">36&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000c0"><b>if&nbsp;</b></font><font color="#000000">(</font><font color="#000000">args.length&nbsp;!=&nbsp;</font><font color="#990000">1</font><font color="#000000">)&nbsp;{</font><br>
<font color="#808080">37&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">System.err.println</font><font color="#000000">(</font><font color="#990000">&#34;Syntax&nbsp;Error&nbsp;:&nbsp;Please&nbsp;provide&nbsp;the&nbsp;location(URL&nbsp;or&nbsp;file)&nbsp;to&nbsp;parse&#34;</font><font color="#000000">)</font><font color="#000000">;</font><br>
<font color="#808080">38&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">System.exit</font><font color="#000000">(</font><font color="#000000">-</font><font color="#990000">1</font><font color="#000000">)</font><font color="#000000">;</font><br>
<font color="#808080">39&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br>
<font color="#808080">40&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">LinkExtractor&nbsp;linkExtractor&nbsp;=&nbsp;</font><font color="#0000c0"><b>new&nbsp;</b></font><font color="#000000">LinkExtractor</font><font color="#000000">(</font><font color="#000000">args</font><font color="#000000">[</font><font color="#990000">0</font><font color="#000000">])</font><font color="#000000">;</font><br>
<font color="#808080">41&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000c0"><b>try&nbsp;</b></font><font color="#000000">{</font><br>
<font color="#808080">42&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">linkExtractor.extractLinks</font><font color="#000000">()</font><font color="#000000">;</font><br>
<font color="#808080">43&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br>
<font color="#808080">44&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000c0"><b>catch&nbsp;</b></font><font color="#000000">(</font><font color="#000000">ParserException&nbsp;e</font><font color="#000000">)&nbsp;{</font><br>
<font color="#808080">45&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">e.printStackTrace</font><font color="#000000">()</font><font color="#000000">;</font><br>
<font color="#808080">46&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br>
<font color="#808080">47&nbsp;</font><font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br>
<font color="#808080">48&nbsp;</font><font color="#000000">}</font><br>
<font color="#ffffff"></font><font color="#ffffff">
</font></code>
    
   </td>
  <!-- end source code -->
   </tr>
  <!-- start J2H link -->
   <tr>
    <td align="right">
<small>
<a href="http://www.java2html.de" target="_blank">Java2html</a>
</small>
    </td>
   </tr>
  <!-- end J2H link -->
 </table>
</center>
<!-- =       END of automatically generated HTML code       = -->
<!-- ======================================================== -->


<p>Let us look at whats really happening here. In <a href="#16">line 16</a>, we 
  are creating a parser object that will work on a given location. The location 
  can be a URL or a file. In <a href="#17">line 17</a>, we ask the parser to register 
  itself with certain standard scanners, that give it the capability to handle 
  special tags (like links, images, etc..). If line 17 is not provided, the program 
  will not output any link tags.</p>
<p>The extractAllNodesThatAre() method call on <a href="#26">line 26</a> in
  extractLinks() is the heart of the program. As it's name suggests, it traverses
  all the nodes in the page and picks out the ones that match the class object
  provided, in this case a LinkTag class.
</p>
<p>We can now cycle through the array of nodes and print out each link URL.
  We can make a call to the LinkTag print() method, or we can print it the way we like, 
  using its interface methods such as getLink() and getLinkText(). Try making 
  the following modifications to Line 31.</p>
<p> 
  <!-- ======================================================== -->
  <!-- = Java Sourcecode to HTML automatically converted code = -->
  <!-- =   J2H V2.0  2002 by Markus Gebhard  markus@jave.de   = -->
  <!-- =     Further information: http://www.java2html.de     = -->
</p>
<center>
 <table  align="center" border="2" cellpadding="3" cellspacing="0" bgcolor="#FFFBF0">
   <tr>
  <!-- start line numbers -->
      <td align="right" valign="top"> <code> <font color="#808080"> 31<br>
   </font>
    </code>
   </td>
  <!-- end line numbers -->
  <!-- start source code -->
   <td valign="top">
    <code>
<font color="#000000">System.out.println</font><font color="#000000">(</font><font color="#990000">&#34;&lt;A&nbsp;HREF=\&#34;&#34;</font><font color="#000000">+linkTag.getLink</font><font color="#000000">()</font><font color="#000000">+</font><font color="#990000">&#34;\&#34;&gt;&#34;</font><font color="#000000">+linkTag.getLinkText</font><font color="#000000">()</font><font color="#000000">+</font><font color="#990000">&#34;&lt;/A&gt;&#34;</font><font color="#000000">)</font><font color="#000000">;</font></code>
    
   </td>
  </tr>
  <!-- end source code -->
  <!-- start J2H link -->
   <tr>
    <td colspan=2 align=right>
<small>
<a href="http://www.java2html.de" target="_blank">Java2html</a>
</small>
    </td>
   </tr>
  <!-- end J2H link -->
 </table>
</center>
<!-- =       END of automatically generated HTML code       = -->
<!-- ======================================================== -->
<p>As you can see, you can get to the data in the tag very easily. You might want 
  to print or format this however you like, but if you want to reconstruct the 
  html as it appeared (as we've tried to do above), then you could use the toHTML 
  method.</p>
<!-- ======================================================== -->
<!-- = Java Sourcecode to HTML automatically converted code = -->
<!-- =   J2H V2.0  2002 by Markus Gebhard  markus@jave.de   = -->
<!-- =     Further information: http://www.java2html.de     = -->
<center>
 <table  align="center" border="2" cellpadding="3" cellspacing="0" bgcolor="#FFFBF0">
   <tr>
  <!-- start line numbers -->
      <td align="right" valign="top"> <code> <font color="#808080"> 31<br>
   </font>
    </code>
   </td>
  <!-- end line numbers -->
  <!-- start source code -->
   <td valign="top">
    <code>
<font color="#000000">System.out.println</font><font color="#000000">(</font><font color="#000000">linkTag.toHTML</font><font color="#000000">())</font><font color="#000000">;</font></code>
    
   </td>
  </tr>
  <!-- end source code -->
  <!-- start J2H link -->
   <tr>
    <td colspan=2 align=right>
<small>
<a href="http://www.java2html.de" target="_blank">Java2html</a>
</small>
    </td>
   </tr>
  <!-- end J2H link -->
 </table>
</center>
<!-- =       END of automatically generated HTML code       = -->
<!-- ======================================================== -->
<p>We can also check if the link is a mailto link, using the method LinkTag.isMailLink()
  by just uncommenting line 30.</p>
<p><a href="index.html">Back to Samples</a><br>
  <a href="../index.html">Back to HTMLParser Home Page</a></p>
</body>
</html>
