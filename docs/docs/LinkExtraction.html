<html><head><title>Link Extraction</title></head><body><DIV class="wikitext">
<P><B>Link Extraction</B></P>
<P>There are many ways of extracting links.</P>
<P>1. Use the <SPAN class="wikiunknown"><U>ObjectFindingVisitor</U></SPAN> to extract links, like so:</P>
<PRE>   Parser parser = new Parser("http://urlIWantToParse.com");
   // Create a visitor, specify that you want to recurse through its children
   // Recursion is needed only if you register all scanners, and a link tag could be embedded
   // within a form tag. But if you register only the link scanner, you don't need recursion.
   ObjectFindingVisitor visitor =
     new ObjectFindingVisitor(LinkTag.class,true);

   parser.registerScanners();

   // Instead of registering all scanners,
   // you could also do - parser.addScanner(new LinkScanner(""));
   parser.visitAllNodesWith(visitor);
   Node [] links = visitor.getTags();
   for (int i=0;i&lt;links.length;i++) {
      LinkTag linkTag = (LinkTag)links[i];
      System.out.println(linkTag.getLink());
      System.out.println(linkTag.getLinkText());
   }</PRE>
<P>2. Use the parser utility method - extractAllNodesThatAre().</P>
<PRE>   Parser parser = new Parser("http://urlIWantToParse.com");
   parser.registerScanners();
   Node [] links = parser.extractAllNodesThatAre(LinkTag.class);
   // Instead of registering all scanners,
   // you could also do - parser.addScanner(new LinkScanner(""));
   for (int i=0;i&lt;links.length;i++) {
      LinkTag linkTag = (LinkTag)links[i];
      System.out.println(linkTag.getLink());
      System.out.println(linkTag.getLinkText());
   }</PRE>
<P>3. It is possible that you are interested in extracting more than just links. In order to customize extraction, write your own visitor. Extend the Visitor class (in the package org.htmlparser.visitors - Parser v1.3 upwards) like so :</P>
<PRE>   public class MyCustomizedVisitor extends Visitor {
      public MyCustomizedVisitor(Parser parser) {
         super(true);  /// Its usually a good idea to perform recursion
         // Add the scanners you want.
         // This decouples your application from having to know which scanners are required
         parser.addScanner(new LinkScanner(""));
         parser.addScanner(new ImageScanner(""));
         // or add all scanners with registerScanners()
      }

      public void visitTag(Tag tag) {
        // Collect any tags you want
        // You can also do type checking like so:
        if (tag instanceof MetaTag) {
           // This tag is a meta tag
           MetaTag metaTag = (MetaTag)tag;
        }
      }

      public void visitStringNode(StringNode stringNode) {
        // Collect text in the page here
      }

      public void visitLinkTag(LinkTag linkTag) {
        // Collect links here
      }

      public void visitImageTag(ImageTag imageTag) {
        // Collect images here
      }

      public void visitEndTag(EndTag endTag) {
        // Checking for end tags can be useful when performing more involved
        // searches in a page
      }

      public void visitRemarkNode(RemarkNode remarkNode) {
         // Collect remark nodes here
      }

      // Add getters to get the data you have collected..
}

In your app..
Parser parser = new Parser(...);
MyCustomizedVisitor visitor = new MyCustomizedVisitor();
parser.visitAllNodesWith(visitor);
// You can now get the data from the visitor interface.
</PRE>
<P>--<A class="wiki" HREF="SomikRaha.html">SomikRaha</A></P></DIV><DIV id="actionbar" class="toolbar"><HR noshade="noshade" class="printer"/><P class="editdate">Last edited on Sunday, February 23, 2003  5:22:44 pm.</P><HR noshade="noshade" class="toolbar"/></body></html>