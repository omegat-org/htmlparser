<html><head><title>Searching For Data</title></head><body><DIV class="wikitext">
<P>Searching for data is one of the most challenging tasks in a web page due to its seemingly unstructured (or badly structured) form. Complex searches are now possible with the parser in a simple to use API. Here's an example :</P>
<P>We are looking at a page which has the following html:</P>
<PRE>&lt;html&gt;
...
&lt;body&gt;
   &lt;table&gt;
     &lt;tr&gt;
       &lt;td&gt;&lt;font size="-1"&gt;Name:&lt;b&gt;&lt;i&gt;John Doe&lt;/i&gt;&lt;/b&gt;&lt;/font&gt;&lt;/td&gt;
       ..
     &lt;/tr&gt;
     &lt;tr&gt;
       ..
     &lt;/tr&gt;
   &lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;</PRE>
<P>We'd like to extract the information corresponding to the field "Name". This is possible if we make use of the fact that the name appears two tags after "Name".</P>
<P>Code to achieve this would look like:</P>
<PRE>parser.registerScanners();
Node nodes [] = parser.extractAllNodesThatAre(TableTag.class);
// Get the first table found
TableTag table = (TableTag)nodes[0];

// Find the position of Name.
StringNode [] stringNodes = table.digupStringNode("Name");
StringNode name = stringNodes[0];

// We assume that the first node that matched is the one we want. We
// navigate to its parent, the column tag &lt;td&gt;
CompositeTag td = name.getParent();

// From the parent, we shall find out the position of "Name"
int posOfName = td.findPositionOf(name);

// Its easy now to navigate to John Doe, as we know it is 3 positions away
Node expectedName = td.childAt(posOfName + 3);
</PRE><HR/>
<P>You can move up the parent tree - e.g. when the data is in seperate columns,</P>
<PRE>&lt;html&gt;
...
&lt;body&gt;
   &lt;table&gt;
     &lt;tr&gt;
       &lt;td&gt;&lt;font size="-1"&gt;Name:&lt;/font&gt;&lt;/td&gt;
       &lt;td&gt;&lt;font size="-1"&gt;John Doe&lt;/font&gt;&lt;/td&gt;
     &lt;/tr&gt;
     &lt;tr&gt;
       ..
     &lt;/tr&gt;
   &lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;</PRE>
<P>We'd like to perform the same search on "Name".</P>
<P>Code to achieve this would look like:</P>
<PRE>parser.registerScanners();
Node nodes [] = parser.extractAllNodesThatAre(TableTag.class);
// Get the first table found
TableTag table = (TableTag)nodes[0];

// Find the position of Name.
StringNode [] stringNodes = table.digupStringNode("Name");

// We assume that the first node that matched is the one we want. We
// navigate to its parent (column &lt;td&gt;)
CompositeTag td = stringNodes[0].getParent();

// Navigate to its parent (row &lt;tr&gt;)
CompositeTag tr = parentOfName.getParent();

// From the parent, we shall find out the position of the column
int columnNo = tr.findPositionOf(td);

// Its easy now to navigate to John Doe, as we know it is in the next column
TableColumn nextColumn = (TableColumn)tr.childAt(columnNo+1);

// The name is the second item in the column tag
Node expectedName = nextColumn.childAt(1);</PRE></DIV><DIV id="actionbar" class="toolbar"><HR noshade="noshade" class="printer"/><P class="editdate">Last edited on Saturday, April 19, 2003 10:38:30 pm.</P><HR noshade="noshade" class="toolbar"/></body></html>